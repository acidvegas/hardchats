<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="theme-color" content="#0a0a0a">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<title>HardChats</title>
	<link rel="stylesheet" href="/static/style.css">
	<link rel="icon" href="/static/favicon.ico">
</head>
<body>
	<noscript>
		<div class="noscript-warning">
			<h2>JavaScript Required</h2>
			<p>HardChats requires JavaScript to be enabled. Please enable JavaScript in your browser settings and refresh the page.</p>
		</div>
	</noscript>
	
	<div id="login-screen">
		<div class="login-box">
			<h1 class="glitch" data-text="HARDCHATS">HARDCHATS</h1>
			<p id="user-count-home" class="user-count-home">Loading...</p>
			<input type="text" id="username" placeholder="Enter your handle" maxlength="20" autocomplete="off" spellcheck="false">
			
			<div class="captcha-box">
				<span id="captcha-question">Loading...</span>
				<input type="text" id="captcha-answer" placeholder="Answer" autocomplete="off" inputmode="numeric">
				<button type="button" id="refresh-captcha" title="New captcha">↻</button>
			</div>
			
			<button id="connect-btn">Connect</button>
			<p id="login-error" class="error-msg hidden"></p>
		</div>
	</div>
	
	<div id="chat-screen" class="hidden">
		<!-- Sidebar Overlay (for mobile) -->
		<div id="sidebar-overlay" class="hidden"></div>
		
		<!-- IRC Sidebar (Left) -->
		<div id="irc-sidebar" class="collapsed">
			<div class="irc-resize-handle" id="irc-resize"></div>
			<div class="irc-panel">
				<div class="irc-header">
					<div class="irc-title">
						<span class="irc-channel">#hardchats</span>
						<span id="irc-status" class="irc-status disconnected">disconnected</span>
					</div>
					<div class="irc-controls">
						<button id="irc-connect" class="irc-control-btn connect" title="Connect to IRC">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M8 5v14l11-7z"/>
							</svg>
						</button>
						<button id="irc-disconnect" class="irc-control-btn disconnect hidden" title="Disconnect from IRC">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M6 6h12v12H6z"/>
							</svg>
						</button>
						<button id="irc-close" class="irc-control-btn close-irc" title="Close Chat">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
							</svg>
						</button>
					</div>
				</div>
				<div id="irc-messages"></div>
				<div class="irc-input-area">
					<input type="text" id="irc-input" placeholder="Type a message..." autocomplete="off" maxlength="300" disabled>
					<span id="irc-char-count" class="char-count">0/300</span>
					<button id="irc-send" disabled>
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
						</svg>
					</button>
				</div>
			</div>
		</div>
		
		<div id="main-area">
			<div id="controls">
				<button id="irc-toggle" class="control-btn irc-toggle-btn" title="Toggle IRC Chat">
					<svg viewBox="0 0 24 24" fill="currentColor">
						<path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
					</svg>
					<span class="irc-badge hidden">0</span>
				</button>
				
				<div class="controls-center">
					<div id="session-timer" class="timer">00:00:00</div>
					
					<div class="control-group">
						<button id="mic-btn" class="control-btn active" title="Toggle Microphone (M)">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
								<path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
							</svg>
						</button>
						<button id="cam-btn" class="control-btn" title="Toggle Camera">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
							</svg>
						</button>
						<button id="screen-btn" class="control-btn" title="Share Screen (S)">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/>
							</svg>
						</button>
						<button id="volume-btn" class="control-btn active" title="Mute/Unmute All Audio">
							<svg viewBox="0 0 24 24" fill="currentColor">
								<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
							</svg>
						</button>
					</div>
				</div>
				
				<button id="users-btn" class="control-btn" title="Toggle Users List">
					<svg viewBox="0 0 24 24" fill="currentColor">
						<path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
					</svg>
				</button>
			</div>
			
			<div id="video-container">
				<div id="video-grid"></div>
				<div id="maximized-view" class="hidden">
					<div id="maximized-video"></div>
					<div id="thumbnail-strip"></div>
				</div>
			</div>
		</div>
		
		<div id="sidebar" class="hidden">
			<div class="sidebar-resize-handle" id="sidebar-resize"></div>
			<div class="sidebar-header">
				<h3>Users</h3>
				<div class="sidebar-header-right">
					<span id="user-count">0</span>
					<button id="close-sidebar" class="close-btn" title="Close">
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
						</svg>
					</button>
				</div>
			</div>
			<div id="users-list"></div>
			<div class="sidebar-footer">
				<button id="defcon-btn" class="defcon-btn" title="DEFCON Mode: Auto-mute and hide video for new users">
					<svg viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
					</svg>
					<span>DEFCON</span>
				</button>
			</div>
		</div>
	</div>
	
	<!-- Volume Popup -->
	<div id="volume-popup" class="volume-popup hidden">
		<div class="volume-popup-header">
			<span id="volume-popup-name">User</span>
			<span id="volume-popup-value">100%</span>
		</div>
		<input type="range" id="volume-slider" min="0" max="150" value="100">
		<div class="volume-popup-labels">
			<span>Mute</span>
			<span>150%</span>
		</div>
	</div>
	
	<!-- Settings Modal -->
	<div id="settings-modal" class="modal hidden">
		<div class="modal-content settings-modal">
			<div class="modal-header">
				<h3>Settings</h3>
				<button id="settings-close" class="modal-close-btn" title="Close">
					<svg viewBox="0 0 24 24" fill="currentColor">
						<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
					</svg>
				</button>
			</div>
			
			<div class="settings-section">
				<h4>Devices</h4>
				<div class="settings-group">
					<label for="mic-select">
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
							<path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
						</svg>
						Microphone
					</label>
					<select id="mic-select"></select>
				</div>
				<div class="settings-group">
					<label for="cam-select">
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
						</svg>
						Camera
					</label>
					<select id="cam-select"></select>
				</div>
				<div class="settings-preview">
					<video id="settings-preview-video" autoplay playsinline muted></video>
					<div id="settings-preview-placeholder">No camera selected</div>
				</div>
			</div>
			
			<div class="settings-section">
				<h4>Preferences</h4>
				<div class="settings-toggle">
					<label>
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
						</svg>
						Browser Notifications
					</label>
					<button id="toggle-notifications" class="toggle-btn" data-enabled="true">
						<span class="toggle-slider"></span>
					</button>
				</div>
				<div class="settings-toggle">
					<label>
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
						</svg>
						Sound Effects
					</label>
					<button id="toggle-sounds" class="toggle-btn" data-enabled="true">
						<span class="toggle-slider"></span>
					</button>
				</div>
				<div class="settings-toggle">
					<label>
						<svg viewBox="0 0 24 24" fill="currentColor">
							<path d="M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C10.23 3.45 5.02 4.89 1 9zm20 2l2-2c-1.64-1.64-3.55-2.82-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4l2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2c1.13-1.13 2.56-1.79 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"/>
						</svg>
						Low Bandwidth Mode
					</label>
					<button id="toggle-lowbandwidth" class="toggle-btn" data-enabled="false">
						<span class="toggle-slider"></span>
					</button>
				</div>
			</div>
			
			<button id="settings-apply" class="btn-primary">Apply Changes</button>
		</div>
	</div>
	
	<footer id="app-footer">
		<span class="footer-brand">HARDCHATS</span>
		<span class="footer-version" id="footer-version">v1.0.0</span>
		<span class="footer-divider">•</span>
		<span class="footer-copyright">© <span id="footer-year">2026</span></span>
		<span class="footer-divider">•</span>
		<span class="footer-author">made by acidvegas</span>
		<a href="https://github.com/acidvegas/hardchats" target="_blank" rel="noopener noreferrer" class="footer-github" title="View on GitHub">
			<svg viewBox="0 0 24 24" fill="currentColor">
				<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
			</svg>
		</a>
	</footer>
	
	<script src="/static/turn.js"></script>
	<script src="/static/client.js"></script>
	<script src="/static/irc.js"></script>
</body>
</html>
